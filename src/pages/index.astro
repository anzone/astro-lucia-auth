---
import Html from "@/ui/layout/Html.astro";
---

<Html>
  <h1>Astro + Lucia Auth</h1>
  <nav>
    <ul>
      <li><a href="/signup">Sign up</a></li>
      {
        !Astro.locals.user?.id && (
          <li>
            <a href="/login">Login</a>
          </li>
        )
      }
      {
        Astro.locals.user?.id && (
          <li>
            <form action="/api/auth/logout" method="post">
              <button type="submit">Logout</button>
            </form>
          </li>
        )
      }
    </ul>
  </nav>
  <p>{Astro.locals.user?.id ?? "Not authenticated"}</p>
</Html>
